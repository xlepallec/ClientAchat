<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Gestion de la caisse</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="js/interactions.js"></script>
    <script src="js/ajoutAchat.js"></script>
    <script src="js/editionClient.js"></script>
    <script src="js/listeAchats.js"></script>
    <script src="js/listeClients.js"></script>
</head>
<body onload="demarrage()">

<div id="conteneurInteractions">
    <!--
    *************
    Formulaire Achat
    *************
    -->
    <div class="container" id="conteneurFormulaireAchat" style="opacity : 0 ;transition : opacity 0.5s ease">
        <div class="row">
            <div class="col-12">
                <H3>Ajouter un achat</H3>
            </div>
        </div>
        <div class="row">
            <div class="col-1">
            </div>
            <div class="col-8 bg-body-tertiary">
                <form id="AjoutAchatForm">
                    <label class="form-label" for="date">Date : </label>
                    <input class="form-control" type="date" id="date" name="date" required>
                    <label class="form-label" for="libelle">Libellé :</label>
                    <input class="form-control" type="text" id="libelle" name="libelle" required>
                    <label class="form-label" for="montant">Montant :</label>
                    <input class="form-control" type="number" id="montant" name="montant" required>
                    <label class="form-label" for="client">Client : </label>
                    <select class="form-select" id="client"></select>
                    <BR>

                </form>
                <button class="btn btn-primary" onclick="ajoutAchat()">Ajouter cet achat</button>
                <button class="btn btn-secondary" onclick="rafraichirListeAchats()">Annuler</button>
            </div>
        </div>
    </div>

    <!--
    *************
    Formulaire Client
    *************
    -->

    <div class="container" id="conteneurFormulaireClient" style="opacity : 0 ;transition : opacity 0.5s ease">
        <div class="row">
            <div class="col-12">
                <H3>Ajouter/Editer un client</H3>
            </div>
        </div>
        <div class="row">
            <div class="col-1">
            </div>
            <div class="col-8  bg-body-tertiary" id="emplacementFormulaire">
                <form id="AjoutForm" enctype="multipart/form-data">
                    <input type="hidden" id="id" name="id" value="-1">
                    <label class="form-label" for="prenom">Prénom : </label>
                    <input class="form-control" type="text" id="prenom" name="prenom" required>
                    <label class="form-label" for="nom">Nom : </label>
                    <input class="form-control" type="text" id="nom" name="nom" required>
                    <label class="form-label" for="photo">Photo : </label>
                    <input class="form-control" type="file" id="photo" name="photo">
                    <BR>
                    <button type="button" class="btn btn-primary" onclick="ajouterClient()" id="boutonEdition">Ajouter ce
                        client
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="rafraichirListeAchats()">Annuler
                    </button>
                    <BR>
                </form>
            </div>
        </div>
    </div>

    <!--
    *************
    Liste Clients
    *************
    -->

    <div class="container" id="listeClients" style="opacity : 0 ;transition : opacity 0.5s ease">
        <div class="row">
            <div class="col-12">
                <H3>Liste des clients</H3>
            </div>
        </div>
        <div class="row">
            <div class="col-1">
            </div>
            <div class="col-8">
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">Numéro</th>
                        <th scope="col">Prénom</th>
                        <th scope="col">Nom</th>
                        <th scope="col">Photo</th>
                    </tr>
                    </thead>
                    <tbody id="tbodyClients">
                    </tbody>
                </table>

                <button type="button" class="btn btn-secondary" onclick="rafraichirListeAchats()">Revenir aux achats du jour</button>

            </div>
        </div>
    </div>

</div>
<div id="conteneurListeAchats">
    <!--
    *************
    Liste des Achats
    *************
    -->
    <div class="container" id="listeAchats" style="opacity : 0 ;transition : opacity 0.5s ease">
        <div class="row">
            <div class="col-12">
                <H3>Achats du jour</H3>
            </div>
        </div>
        <div class="row">
            <div class="col-1">
            </div>
            <div class="col-8">
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Libelle</th>
                        <th scope="col">Montant</th>
                        <th scope="col">Client</th>
                    </tr>
                    </thead>
                    <tbody id="tbodyAchats">
                    </tbody>
                </table>

                <button type="button" class="btn btn-secondary" onclick="demarrerAjoutAchat()">Ajouter un achat
                </button>
                <button type="button" class="btn btn-secondary" onclick="afficherFormulaireClient()">Ajouter un client
                </button>
                <button type="button" class="btn btn-secondary" onclick="rafraichirListeClients()">Afficher les clients
                </button>

            </div>
        </div>
    </div>
</div>
<script>
    function demarrage() {
        initialiserInteractions();
        setTimeout(rafraichirListeAchats, 2000);
    }

</script>
</body>
</html>